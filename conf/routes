# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

#Import Secure
*      /                  module:secure

# Home page
GET     /                                       Application.index

GET     /nodes                             		NodesController.index
GET     /nodes/disconnect                		NodesController.disconnect
GET     /nodes/sync                		        NodesController.syncTopology
GET     /nodes/check                            NodesController.jsonCheckNode

GET     /nodes/json/info                        NodesController.jsonSystemInfo

GET     /nodes/{id}                      		NodesController.node
GET     /nodes/{id}/connect                		NodesController.connect
GET     /nodes/{id}/stop                		NodesController.stop
GET     /nodes/{id}/shutdown               		NodesController.shutdown

GET     /artifacts                              ArtifactsController.index

GET     /artifacts/repository                   ArtifactsController.repository
POST    /artifacts/repository                   ArtifactsController.doRepositoryCreate
GET     /artifacts/repository/{id}/deploy       ArtifactsController.repositoryDeploy
GET     /artifacts/components/{name}            ArtifactsController.component
POST    /artifacts/deploy                       ArtifactsController.doDeployAndStartArtifact
POST    /artifacts/upload                       ArtifactsController.doUpload
GET     /artifacts/undeploy/{name}              ArtifactsController.doStopAndUndeployArtifact
GET     /artifacts/sls/{name}                   ArtifactsController.sl
GET     /artifacts/sas/{name}                   ArtifactsController.sa
GET     /artifacts/delete/locals                ArtifactsController.deleteLocalArtifacts

GET     /public/artifacts/                      ArtifactsController.repository

GET     /endpoints                              EndpointsController.index
GET     /endpoints/sync                         EndpointsController.synchronize()
GET     /endpoints/syncall                      EndpointsController.synchronizeAll()

# Monitoring

GET     /monitoring                                 MonitoringController.index
GET     /monitoring/subscriptions                   MonitoringController.subscriptions
GET     /monitoring/subscriptions/{id}/unsubscribe  MonitoringController.unsubscribe
GET     /monitoring/clear                           MonitoringController.clearAll
GET     /monitoring/readall                         MonitoringController.markAllAsRead
GET     /monitoring/json/unread                     MonitoringController.jsonUnreadAlerts
GET     /monitoring/json/fake/add                   MonitoringController.addFakeAlert
GET     /monitoring/json/fake/subscription/add      MonitoringController.addFakeSubscription

# Send alerts to the client using Web socket channel
WS      /monitoring/websocket/newAlert              AlertWebSocket.newAlert

# Websockets
WS      /websocket/message                          WebSocket.newMessage

# Ignore favicon requests
GET     /favicon.ico                            404

# Map static resources from the /app/public folder to the /public path
GET     /public/                                staticDir:public

# Catch all
*       /{controller}/{action}                  {controller}.{action}

# Import CRUD routes
*      /admin              module:crud
